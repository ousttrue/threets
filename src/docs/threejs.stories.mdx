import { Meta } from "@ladle/react";

<Meta title="r3f/index" />

# three.js をはじめる

## React-three-fiber 

`three.js` と言っても react-three-fiber の方。

https://docs.pmnd.rs/react-three-fiber/getting-started/introduction

## box

```tsx
export const Box = () => (
  <Canvas>
    <mesh>
      <boxGeometry />
    </mesh>
  </Canvas>
);
```

`<Canvas>` の中が r3f の世界になる。

Canvas の子孫の小文字タグは、 
three.js の Object を示す規約のようだ。

https://threejs.org/docs/index.html?q=box#api/en/geometries/BoxGeometry

[box](?story=r3f--box)

### drei Box

```tsx
import { Box } from "@react-three/drei";

export const Box = () => (
  <Canvas>
    <Box />
  </Canvas>
);
```

## camera

`drei` の CameraControls

```tsx
import { CameraControls } from "@react-three/drei";

export const Camera = () => (
  <Canvas camera={{ position: [0, 0, 5], fov: 60 }}>
    <CameraControls />
  </Canvas>
)
```

[camera](?story=r3f--camera)

`Canvas` にはデフォルトの PersePective カメラが仕込まれている。

`CameraControls` にはデフォルトのマウスイベント操作(OrbitControls?が含まれている)

## leva

### trouble

```
Uncaught TypeError: Cannot read properties of undefined (reading 'cssRules')
```

```sh
rm -rf node_moduels/.vite
```

で治る時もある。
react の mount / unmount のトラブルとかそういうの？

### sample

r3f と併用する gui

[【React Three Fiber】Reactで作る３D【#４leva useControls】](https://zenn.dev/web_life_ch/articles/4bf90c3388e176)

